/*! Contour-Geo - v1.0.1 - 2015-09-11 */

!function(a,b){b["true"]=a,function(){Contour.geo=Contour.geo||{};var a=function(a){return _.isArray(a)&&_.isArray(a[0])&&2===a[0].length&&_.all(a[0],_.isNumber)};Contour.expose("geo",function(){return{dataNormalizer:function(b,c){return a(b)?b:_.nw.normalizeSeries.apply(this,arguments)},isSupportedDataFormat:function(b){return!a(b)&&_.nw.isSupportedDataFormat(b)}}})}(),function(){"use strict";function a(a,b,c){var d=c.chart.plotWidth,e=c.chart.plotHeight,f=c.map||{},g=a,h=f.fill?_.isFunction(f.fill)?f.fill:function(){return f.fill}:_.noop,i=f.cssClass?_.isFunction(f.cssClass)?f.cssClass:function(){return f.cssClass}:_.noop,j=c.map.scaleRatio,k=c.map.projection.scale(c.map.scale||d*j).translate(c.map.translation||[d/2,e/2]).precision(c.map.precision);k.center&&k.center(c.map.center||[0,0]);var l=d3.geo.path().projection(k),m=b;m.append("g").attr("id",c.map.feature).selectAll("path").data(topojson.feature(g,g.objects[c.map.feature]).features).enter().append("path").attr("id",function(a){return a.id}).attr("class",function(a){return"tooltip-tracker state "+i(a)}).attr("fill",h).attr("d",l),m.append("path").datum(topojson.mesh(g,g.objects[c.map.feature]),function(a,b){return a!==b}).attr("id","state-borders").attr("d",l)}var b={map:{feature:"all",scale:void 0,scaleRatio:1.3333,projection:d3.geo.mercator(),center:void 0,precision:.1,translation:void 0,cssClass:void 0,fill:void 0}};a.defaults=b,Contour["export"]("map",a)}(),function(){"use strict";var a={},b=function(a,b,c){return this.ensureDefaults(c,"map"),c.map=c.map||{},_.merge(c.map,c.choropleth),this.map.renderer.call(this,a,b,c)};b.defaults=a,Contour["export"]("choropleth",b)}(),function(){"use strict";function a(a,c,d){var e="string"==typeof d.marker.shape?b[d.marker.shape]:d.marker.shape,f=c.selectAll(".geo-marker").data(a),g=function(a){return function(b,c,d){var e="function"==typeof a?a.call(this,b,c,d):a?a:"";return"geo-marker "+e}};f.enter().call(_.partialRight(_.partial(e,a),d)),f.attr("class",g(d.marker.cssClass)),f.exit().remove()}var b={circle:function(a,b,c){var d=c.map.projection;return b.append("circle").attr("cx",function(a){return d(a)[0]}).attr("cy",function(a){return d(a)[1]}).attr("r",c.marker.size/2+"px").attr("fill",c.marker.fill)},triangle:function(a,b,c){var d=c.map.projection,e=c.marker.size,f=[-.5,0,0,-1,.5,0].map(function(a){return a*e}).join(" ");return b.append("polyline").attr("transform",function(a){var b=d(a);return"translate("+b[0]+","+b[1]+")"}).attr("points",f).attr("fill",c.marker.fill)}},c={marker:{size:10,shape:b.circle,cssClass:void 0,fill:void 0}};a.defaults=c,a.shapes=b,Contour["export"]("marker",a)}(),function(){"use strict";Contour["export"]("smallStatesCallouts",function(a,b,c){function d(a,b){var c=d3.select(this),d=l.select("#"+a),e=d.attr("class"),g=d.attr("fill"),h=d.attr("stroke"),i=j.centroid(d.node().__data__),q=c.append("line").attr("x1",i[0]).attr("y1",i[1]),r=c.append("g").attr("transform",function(){return"translate("+(f-n)+","+(p+m*b+(o-1)*b)+")"}),s=k(r.node());q.attr("x2",s[0]).attr("y2",s[1]),r.append("rect").datum(d.node().__data__).attr("x",0).attr("y",0).attr("width",n).attr("height",m).attr("class",e).attr("fill",g).attr("stroke",h),r.append("text").text(a).attr("y",m/2).attr("dy",".31em").attr("x",n/2)}var e=["NH","VT","MA","RI","CT","NJ","DE","MD"],f=c.chart.plotWidth,g=c.chart.plotHeight,h=c.map.scaleRatio,i=d3.geo.albersUsa().scale(c.map.scale||f*h).translate([f/2,g/2]),j=d3.geo.path().projection(i),k=function(a){var b=a.getBoundingClientRect();return[b.left+b.width/2,b.top+b.height/2]},l=this.svg.select("#states"),m=20,n=20,o=5,p=70,q=b.selectAll(".small-state-callout").data(e);q.enter().append("g").attr("class","small-state-callout").each(d)})}(),function(){"use strict";var a=function(a,b,c){return this.ensureDefaults(c,"map"),c.choropleth=c.choropleth||{},_.merge(c.choropleth,{projection:d3.geo.albersUsa(),feature:"states"},c.USMap),this.choropleth.renderer.call(this,a,b,c)};Contour["export"]("USMap",a)}(),Contour.geo.version="1.0.1",function(){"use strict";var a=function(a,b,c){this.ensureDefaults(c,"map");var d=c.chart.plotWidth,e=c.chart.plotHeight;return c.choropleth=c.choropleth||{},_.merge(c.choropleth,{feature:"all",projection:(d3.geo.miller||d3.geo.equirectangular)(),scale:(d+1)/2/Math.PI,precision:.1,translation:[d/2,e/2]},c.worldChoropleth),this.choropleth.renderer.call(this,a,b,c)};Contour["export"]("worldMap",a)}()}({},function(){return this}());
//# sourceMappingURL=contour.geo.min.js.map